apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
metadata:
  creationTimestamp: null
spec:
  components:
    policy:
      enabled: false
    telemetry:
      enabled: false
  values:
    gateways:
      istio-ingressgateway:
        autoscaleMax: 20
        autoscaleMin: 20
        nodeSelector:
          scalers:
            istio: dedicated
        podAntiAffinityTermLabelSelector:
        - key: istio
          operator: In
          topologyKey: kubernetes.io/hostname
          values: ingressgateway
        tolerations:
        - effect: NoSchedule
          key: scalers.istio
          operator: Equal
          value: dedicated
    pilot:
      autoscaleMax: 20
      autoscaleMin: 20
      nodeSelector:
        scalers:
          istio: dedicated
      podAntiAffinityTermLabelSelector:
      - key: istio
        operator: In
        topologyKey: kubernetes.io/hostname
        values: pilot
      tolerations:
      - effect: NoSchedule
        key: scalers.istio
        operator: Equal
        value: dedicated

